<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1469px" preserveAspectRatio="none" style="width:1557px;height:1469px;background:#FFFFFF;" version="1.1" viewBox="0 0 1557 1469" width="1557px" zoomAndPan="magnify"><defs><filter height="300%" id="f1rjlyjqdt24cn" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1rjlyjqdt24cn)" height="21.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="137.5" y="66.9766"/><rect fill="#FFFFFF" filter="url(#f1rjlyjqdt24cn)" height="1311.291" style="stroke:#A80036;stroke-width:1.0;" width="10" x="482.5" y="88.2871"/><rect fill="#FFFFFF" filter="url(#f1rjlyjqdt24cn)" height="59.6211" style="stroke:#000000;stroke-width:2.0;" width="232.5" x="372" y="103.2871"/><rect fill="#FFFFFF" filter="url(#f1rjlyjqdt24cn)" height="75.9316" style="stroke:#000000;stroke-width:2.0;" width="1171" x="372" y="1256.0254"/><rect fill="#FFFFFF" filter="url(#f1rjlyjqdt24cn)" height="46.6211" style="stroke:#000000;stroke-width:2.0;" width="593" x="10" y="1345.957"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="142" x2="142" y1="56.9766" y2="1409.5781"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="487" x2="487" y1="56.9766" y2="1409.5781"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="748" x2="748" y1="56.9766" y2="1409.5781"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="978" x2="978" y1="56.9766" y2="1409.5781"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1190" x2="1190" y1="56.9766" y2="1409.5781"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1397" x2="1397" y1="56.9766" y2="1409.5781"/><path d="M25,30.4883 L260,30.4883 C265,30.4883 265,43.7324 265,43.7324 C265,43.7324 265,56.9766 260,56.9766 L25,56.9766 C20,56.9766 20,43.7324 20,43.7324 C20,43.7324 20,30.4883 25,30.4883 " fill="#FEFECE" filter="url(#f1rjlyjqdt24cn)" style="stroke:#A80036;stroke-width:2.0;"/><path d="M260,30.4883 C255,30.4883 255,43.7324 255,43.7324 C255,56.9766 260,56.9766 260,56.9766 " fill="none" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="225" x="25" y="49.0234">ID.JENIUS.INVESTMENT.REVERSAL</text><path d="M25,1408.5781 L260,1408.5781 C265,1408.5781 265,1421.8223 265,1421.8223 C265,1421.8223 265,1435.0664 260,1435.0664 L25,1435.0664 C20,1435.0664 20,1421.8223 20,1421.8223 C20,1421.8223 20,1408.5781 25,1408.5781 " fill="#FEFECE" filter="url(#f1rjlyjqdt24cn)" style="stroke:#A80036;stroke-width:2.0;"/><path d="M260,1408.5781 C255,1408.5781 255,1421.8223 255,1421.8223 C255,1435.0664 260,1435.0664 260,1435.0664 " fill="none" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="225" x="25" y="1427.1133">ID.JENIUS.INVESTMENT.REVERSAL</text><rect fill="#FEFECE" filter="url(#f1rjlyjqdt24cn)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="207" x="382" y="21.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="193" x="389" y="42.0234">worker-investment-reversal</text><rect fill="#FEFECE" filter="url(#f1rjlyjqdt24cn)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="207" x="382" y="1408.5781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="193" x="389" y="1429.1133">worker-investment-reversal</text><rect fill="#FEFECE" filter="url(#f1rjlyjqdt24cn)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="151" x="673" y="17.4883"/><rect fill="#FEFECE" filter="url(#f1rjlyjqdt24cn)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="151" x="669" y="21.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="137" x="676" y="42.0234">inflightTransactions</text><rect fill="#FEFECE" filter="url(#f1rjlyjqdt24cn)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="151" x="673" y="1408.5781"/><rect fill="#FEFECE" filter="url(#f1rjlyjqdt24cn)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="151" x="669" y="1412.5781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="137" x="676" y="1433.1133">inflightTransactions</text><rect fill="#FEFECE" filter="url(#f1rjlyjqdt24cn)" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="276" x="838" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="34" x="959" y="25.5352">MDW</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="262" x="845" y="42.0234">POST /el01/equationJournal/reversals</text><rect fill="#FEFECE" filter="url(#f1rjlyjqdt24cn)" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="276" x="838" y="1408.5781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="34" x="959" y="1429.1133">MDW</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="262" x="845" y="1445.6016">POST /el01/equationJournal/reversals</text><rect fill="#FEFECE" filter="url(#f1rjlyjqdt24cn)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="116" x="1132" y="17.4883"/><rect fill="#FEFECE" filter="url(#f1rjlyjqdt24cn)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="116" x="1128" y="21.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="1135" y="42.0234">failedReversals</text><rect fill="#FEFECE" filter="url(#f1rjlyjqdt24cn)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="116" x="1132" y="1408.5781"/><rect fill="#FEFECE" filter="url(#f1rjlyjqdt24cn)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="116" x="1128" y="1412.5781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="1135" y="1433.1133">failedReversals</text><rect fill="#FEFECE" filter="url(#f1rjlyjqdt24cn)" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="267" x="1262" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="34" x="1378.5" y="25.5352">MDW</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="253" x="1269" y="42.0234">POST /el01/equationJournal/posting</text><rect fill="#FEFECE" filter="url(#f1rjlyjqdt24cn)" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="267" x="1262" y="1408.5781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="34" x="1378.5" y="1429.1133">MDW</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="253" x="1269" y="1445.6016">POST /el01/equationJournal/posting</text><rect fill="#FFFFFF" filter="url(#f1rjlyjqdt24cn)" height="21.3105" style="stroke:#A80036;stroke-width:1.0;" width="10" x="137.5" y="66.9766"/><rect fill="#FFFFFF" filter="url(#f1rjlyjqdt24cn)" height="1311.291" style="stroke:#A80036;stroke-width:1.0;" width="10" x="482.5" y="88.2871"/><polygon fill="#A80036" points="470.5,84.2871,480.5,88.2871,470.5,92.2871,474.5,88.2871" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="142.5" x2="476.5" y1="88.2871" y2="88.2871"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="246" x="149.5" y="83.5449">Consume {cif, referenceNo, retryCount}</text><path d="M372,103.2871 L439,103.2871 L439,110.2871 L429,120.2871 L372,120.2871 L372,103.2871 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="59.6211" style="stroke:#000000;stroke-width:2.0;" width="232.5" x="372" y="103.2871"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="22" x="387" y="116.8555">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="104" x="454" y="115.9219">[if retryCount &gt; 0]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="492.5" x2="534.5" y1="141.9082" y2="141.9082"/><line style="stroke:#A80036;stroke-width:1.0;" x1="534.5" x2="534.5" y1="141.9082" y2="154.9082"/><line style="stroke:#A80036;stroke-width:1.0;" x1="493.5" x2="534.5" y1="154.9082" y2="154.9082"/><polygon fill="#A80036" points="503.5,150.9082,493.5,154.9082,503.5,158.9082,499.5,154.9082" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="499.5" y="137.166">wait 5 minutes</text><polygon fill="#A80036" points="503.5,187.2188,493.5,191.2188,503.5,195.2188,499.5,191.2188" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="497.5" x2="747.5" y1="191.2188" y2="191.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="232" x="509.5" y="186.4766">get inflight data by {cif, referenceNo}</text><polygon fill="#A80036" points="966,726.7773,976,730.7773,966,734.7773,970,730.7773" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="492.5" x2="972" y1="730.7773" y2="730.7773"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123" x="499.5" y="726.0352">Reverse transaction</text><path d="M983,204.2188 L983,1239.2188 L1247,1239.2188 L1247,214.2188 L1237,204.2188 L983,204.2188 " fill="#FBFB77" filter="url(#f1rjlyjqdt24cn)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1237,204.2188 L1237,214.2188 L1247,214.2188 L1237,204.2188 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="989" y="221.7871">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168" x="997" y="237.0977">processingCode: 'A33000',</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="76" x="997" y="252.4082">postingRq: {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79" x="1005" y="267.7188">journalList: [</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="1013" y="283.0293">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="1021" y="298.3398">accountNo: {source},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="1021" y="313.6504">trxCode: '0C1',</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="1021" y="328.9609">amount: {amount},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="1021" y="344.2715">currency: 'IDR',</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="86" x="1021" y="359.582">costCenter: '',</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84" x="1021" y="374.8926">indicator: 'D',</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164" x="1021" y="390.2031">narrative1: '{subAccount}',</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165" x="1021" y="405.5137">narrative2: '{referenceNo}',</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="174" x="1021" y="420.8242">narrative3: '{productName}',</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="1021" y="436.1348">narrative4: ''</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="1013" y="451.4453">},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="1013" y="466.7559">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="1021" y="482.0664">accountNo: '{source}',</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="1021" y="497.377">trxCode: '0C2',</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="1021" y="512.6875">amount: '{fee + tax}',</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="1021" y="527.998">currency: 'IDR',</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="86" x="1021" y="543.3086">costCenter: '',</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84" x="1021" y="558.6191">indicator: 'D',</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164" x="1021" y="573.9297">narrative1: '{subAccount}',</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165" x="1021" y="589.2402">narrative2: '{referenceNo}',</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="174" x="1021" y="604.5508">narrative3: '{productName}',</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="1021" y="619.8613">narrative4: ''</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="1013" y="635.1719">},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="1013" y="650.4824">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="211" x="1021" y="665.793">accountNo: '{productGLAccount}',</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="1021" y="681.1035">trxCode: '5C1',</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="1021" y="696.4141">amount: '{amount}',</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="1021" y="711.7246">currency: 'IDR',</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="86" x="1021" y="727.0352">costCenter: '',</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83" x="1021" y="742.3457">indicator: 'C',</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164" x="1021" y="757.6563">narrative1: '{subAccount}',</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165" x="1021" y="772.9668">narrative2: '{referenceNo}',</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="174" x="1021" y="788.2773">narrative3: '{productName}',</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="1021" y="803.5879">narrative4: ''</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="1013" y="818.8984">},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="1013" y="834.209">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="194" x="1021" y="849.5195">accountNo: '{income account}',</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="1021" y="864.8301">trxCode: '5C2',</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="1021" y="880.1406">amount: '{fee}',</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="1021" y="895.4512">currency: 'IDR',</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="1021" y="910.7617">costCenter: '987003',</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83" x="1021" y="926.0723">indicator: 'C',</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164" x="1021" y="941.3828">narrative1: '{subAccount}',</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165" x="1021" y="956.6934">narrative2: '{referenceNo}',</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="174" x="1021" y="972.0039">narrative3: '{productName}',</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="1021" y="987.3145">narrative4: ''</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="1013" y="1002.625">},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="1013" y="1017.9355">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168" x="1021" y="1033.2461">accountNo: '{tax account}',</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="1021" y="1048.5566">trxCode: '5C3',</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="1021" y="1063.8672">amount: '{tax}',</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="1021" y="1079.1777">currency: 'IDR',</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="86" x="1021" y="1094.4883">costCenter: '',</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83" x="1021" y="1109.7988">indicator: 'C',</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164" x="1021" y="1125.1094">narrative1: '{subAccount}',</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165" x="1021" y="1140.4199">narrative2: '{referenceNo}',</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="174" x="1021" y="1155.7305">narrative3: '{productName}',</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="1021" y="1171.041">narrative4: ''</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="1013" y="1186.3516">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="1005" y="1201.6621">]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="997" y="1216.9727">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="989" y="1232.2832">}</text><path d="M372,1256.0254 L439,1256.0254 L439,1263.0254 L429,1273.0254 L372,1273.0254 L372,1256.0254 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="75.9316" style="stroke:#000000;stroke-width:2.0;" width="1171" x="372" y="1256.0254"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="22" x="387" y="1269.5938">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="258" x="454" y="1268.6602">[if statusCode=400 &amp;&amp; "x-responsecode"=96]</text><polygon fill="#A80036" points="1178,1290.6465,1188,1294.6465,1178,1298.6465,1182,1294.6465" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="492.5" x2="1184" y1="1294.6465" y2="1294.6465"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144" x="499.5" y="1289.9043">save to failed reversals</text><polygon fill="#A80036" points="1385.5,1319.957,1395.5,1323.957,1385.5,1327.957,1389.5,1323.957" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="492.5" x2="1391.5" y1="1323.957" y2="1323.957"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151" x="499.5" y="1319.2148">Publish reversed journal</text><path d="M10,1345.957 L77,1345.957 L77,1352.957 L67,1362.957 L10,1362.957 L10,1345.957 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="46.6211" style="stroke:#000000;stroke-width:2.0;" width="593" x="10" y="1345.957"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="22" x="25" y="1359.5254">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="102" x="92" y="1358.5918">[if error occurred]</text><polygon fill="#A80036" points="153.5,1380.5781,143.5,1384.5781,153.5,1388.5781,149.5,1384.5781" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="147.5" x2="481.5" y1="1384.5781" y2="1384.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="316" x="159.5" y="1379.8359">publish to reversal {cif,referenceNo,retryCount++}</text><!--MD5=[7720bdf690f5fd8bea281f3770c361b9]
@startuml create transaction
queue "ID.JENIUS.INVESTMENT.REVERSAL" as kafka
participant "worker-investment-reversal" as wir
collections "inflightTransactions" as inflights
participant "MDW\nPOST /el01/equationJournal/reversals" as mdw
collections "failedReversals" as faileds
participant "MDW\nPOST /el01/equationJournal/posting" as mdwJournal

activate kafka
kafka -> wir: Consume {cif, referenceNo, retryCount}
deactivate kafka
activate wir
opt if retryCount > 0
wir -> wir: wait 5 minutes
end
wir <- inflights: get inflight data by {cif, referenceNo}
wir -> mdw: Reverse transaction
note right
{
  processingCode: 'A33000',
  postingRq: {
    journalList: [
      {
        accountNo: {source},
        trxCode: '0C1',
        amount: {amount},
        currency: 'IDR',
        costCenter: '',
        indicator: 'D',
        narrative1: '{subAccount}',
        narrative2: '{referenceNo}',
        narrative3: '{productName}',
        narrative4: ''
      },
      {
        accountNo: '{source}',
        trxCode: '0C2',
        amount: '{fee + tax}',
        currency: 'IDR',
        costCenter: '',
        indicator: 'D',
        narrative1: '{subAccount}',
        narrative2: '{referenceNo}',
        narrative3: '{productName}',
        narrative4: ''
      },
      {
        accountNo: '{productGLAccount}',
        trxCode: '5C1',
        amount: '{amount}',
        currency: 'IDR',
        costCenter: '',
        indicator: 'C',
        narrative1: '{subAccount}',
        narrative2: '{referenceNo}',
        narrative3: '{productName}',
        narrative4: ''
      },
      {
        accountNo: '{income account}',
        trxCode: '5C2',
        amount: '{fee}',
        currency: 'IDR',
        costCenter: '987003',
        indicator: 'C',
        narrative1: '{subAccount}',
        narrative2: '{referenceNo}',
        narrative3: '{productName}',
        narrative4: ''
      },
      {
        accountNo: '{tax account}',
        trxCode: '5C3',
        amount: '{tax}',
        currency: 'IDR',
        costCenter: '',
        indicator: 'C',
        narrative1: '{subAccount}',
        narrative2: '{referenceNo}',
        narrative3: '{productName}',
        narrative4: ''
      }
    ]
  }
}
end note
opt if statusCode=400 && "x-responsecode"=96
wir -> faileds: save to failed reversals
wir -> mdwJournal: Publish reversed journal
end
opt if error occurred
wir -> kafka: publish to reversal {cif,referenceNo,retryCount++}
end
deactivate wir
@enduml

PlantUML version 1.2022.0(Tue Jan 11 23:16:42 WIB 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>