<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1460px" preserveAspectRatio="none" style="width:1775px;height:1460px;background:#FFFFFF;" version="1.1" viewBox="0 0 1775 1460" width="1775px" zoomAndPan="magnify"><defs><filter height="300%" id="flukm90a9pxmg" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#flukm90a9pxmg)" height="1315.3535" style="stroke:#A80036;stroke-width:1.0;" width="10" x="166" y="66.9766"/><rect fill="#FFFFFF" filter="url(#flukm90a9pxmg)" height="272.1055" style="stroke:#A80036;stroke-width:1.0;" width="10" x="381" y="93.2871"/><rect fill="#FFFFFF" filter="url(#flukm90a9pxmg)" height="182.8633" style="stroke:#A80036;stroke-width:1.0;" width="10" x="381" y="399.7031"/><rect fill="#FFFFFF" filter="url(#flukm90a9pxmg)" height="405.0371" style="stroke:#A80036;stroke-width:1.0;" width="10" x="381" y="616.877"/><rect fill="#FFFFFF" filter="url(#flukm90a9pxmg)" height="326.1055" style="stroke:#A80036;stroke-width:1.0;" width="10" x="381" y="1056.2246"/><rect fill="#FFFFFF" filter="url(#flukm90a9pxmg)" height="46.6211" style="stroke:#000000;stroke-width:2.0;" width="318.5" x="138" y="231.8398"/><rect fill="#FFFFFF" filter="url(#flukm90a9pxmg)" height="46.6211" style="stroke:#000000;stroke-width:2.0;" width="318.5" x="138" y="478.3242"/><rect fill="#FFFFFF" filter="url(#flukm90a9pxmg)" height="46.6211" style="stroke:#000000;stroke-width:2.0;" width="318.5" x="138" y="666.1875"/><rect fill="#FFFFFF" filter="url(#flukm90a9pxmg)" height="46.6211" style="stroke:#000000;stroke-width:2.0;" width="318.5" x="138" y="756.1191"/><rect fill="#FFFFFF" filter="url(#flukm90a9pxmg)" height="46.6211" style="stroke:#000000;stroke-width:2.0;" width="396" x="315.5" y="917.6719"/><rect fill="#FFFFFF" filter="url(#flukm90a9pxmg)" height="46.6211" style="stroke:#000000;stroke-width:2.0;" width="318.5" x="138" y="1105.5352"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="171" x2="171" y1="56.9766" y2="1400.3301"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="385.5" x2="385.5" y1="56.9766" y2="1400.3301"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="656.5" x2="656.5" y1="56.9766" y2="1400.3301"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="790.5" x2="790.5" y1="56.9766" y2="1400.3301"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="920.5" x2="920.5" y1="56.9766" y2="1400.3301"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1041.5" x2="1041.5" y1="56.9766" y2="1400.3301"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1217.5" x2="1217.5" y1="56.9766" y2="1400.3301"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1364.5" x2="1364.5" y1="56.9766" y2="1400.3301"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1592.5" x2="1592.5" y1="56.9766" y2="1400.3301"/><rect fill="#FEFECE" filter="url(#flukm90a9pxmg)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="42" x="148" y="21.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="155" y="42.0234">App</text><rect fill="#FEFECE" filter="url(#flukm90a9pxmg)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="42" x="148" y="1399.3301"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="155" y="1419.8652">App</text><rect fill="#FEFECE" filter="url(#flukm90a9pxmg)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="117" x="325.5" y="21.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103" x="332.5" y="42.0234">ms-investment</text><rect fill="#FEFECE" filter="url(#flukm90a9pxmg)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="117" x="325.5" y="1399.3301"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103" x="332.5" y="1419.8652">ms-investment</text><rect fill="#FEFECE" filter="url(#flukm90a9pxmg)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="81" x="616.5" y="17.4883"/><rect fill="#FEFECE" filter="url(#flukm90a9pxmg)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="81" x="612.5" y="21.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67" x="619.5" y="42.0234">portfolios</text><rect fill="#FEFECE" filter="url(#flukm90a9pxmg)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="81" x="616.5" y="1399.3301"/><rect fill="#FEFECE" filter="url(#flukm90a9pxmg)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="81" x="612.5" y="1403.3301"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67" x="619.5" y="1423.8652">portfolios</text><rect fill="#FEFECE" filter="url(#flukm90a9pxmg)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="154" x="711.5" y="21.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="140" x="718.5" y="42.0234">ms-user-preference</text><rect fill="#FEFECE" filter="url(#flukm90a9pxmg)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="154" x="711.5" y="1399.3301"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="140" x="718.5" y="1419.8652">ms-user-preference</text><rect fill="#FEFECE" filter="url(#flukm90a9pxmg)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="75" x="883.5" y="17.4883"/><rect fill="#FEFECE" filter="url(#flukm90a9pxmg)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="75" x="879.5" y="21.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="886.5" y="42.0234">accounts</text><rect fill="#FEFECE" filter="url(#flukm90a9pxmg)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="75" x="883.5" y="1399.3301"/><rect fill="#FEFECE" filter="url(#flukm90a9pxmg)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="75" x="879.5" y="1403.3301"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="886.5" y="1423.8652">accounts</text><rect fill="#FEFECE" filter="url(#flukm90a9pxmg)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="131" x="976.5" y="17.4883"/><rect fill="#FEFECE" filter="url(#flukm90a9pxmg)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="131" x="972.5" y="21.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117" x="979.5" y="42.0234">redis-investment</text><rect fill="#FEFECE" filter="url(#flukm90a9pxmg)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="131" x="976.5" y="1399.3301"/><rect fill="#FEFECE" filter="url(#flukm90a9pxmg)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="131" x="972.5" y="1403.3301"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117" x="979.5" y="1423.8652">redis-investment</text><rect fill="#FEFECE" filter="url(#flukm90a9pxmg)" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="188" x="1121.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32" x="1199.5" y="25.5352">WMS</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="174" x="1128.5" y="42.0234">InquiryCustomerPortfolio</text><rect fill="#FEFECE" filter="url(#flukm90a9pxmg)" height="46.9766" style="stroke:#A80036;stroke-width:1.5;" width="188" x="1121.5" y="1399.3301"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32" x="1199.5" y="1419.8652">WMS</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="174" x="1128.5" y="1436.3535">InquiryCustomerPortfolio</text><rect fill="#FEFECE" filter="url(#flukm90a9pxmg)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="75" x="1327.5" y="17.4883"/><rect fill="#FEFECE" filter="url(#flukm90a9pxmg)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="75" x="1323.5" y="21.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="1330.5" y="42.0234">products</text><rect fill="#FEFECE" filter="url(#flukm90a9pxmg)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="75" x="1327.5" y="1399.3301"/><rect fill="#FEFECE" filter="url(#flukm90a9pxmg)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="75" x="1323.5" y="1403.3301"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="1330.5" y="1423.8652">products</text><path d="M1421.5,30.4883 L1763.5,30.4883 C1768.5,30.4883 1768.5,43.7324 1768.5,43.7324 C1768.5,43.7324 1768.5,56.9766 1763.5,56.9766 L1421.5,56.9766 C1416.5,56.9766 1416.5,43.7324 1416.5,43.7324 C1416.5,43.7324 1416.5,30.4883 1421.5,30.4883 " fill="#FEFECE" filter="url(#flukm90a9pxmg)" style="stroke:#A80036;stroke-width:2.0;"/><path d="M1763.5,30.4883 C1758.5,30.4883 1758.5,43.7324 1758.5,43.7324 C1758.5,56.9766 1763.5,56.9766 1763.5,56.9766 " fill="none" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="332" x="1421.5" y="49.0234">ID.JENIUS.RECURRING.ENRICHER.MUTUAL_FUNDS</text><path d="M1421.5,1399.3301 L1763.5,1399.3301 C1768.5,1399.3301 1768.5,1412.5742 1768.5,1412.5742 C1768.5,1412.5742 1768.5,1425.8184 1763.5,1425.8184 L1421.5,1425.8184 C1416.5,1425.8184 1416.5,1412.5742 1416.5,1412.5742 C1416.5,1412.5742 1416.5,1399.3301 1421.5,1399.3301 " fill="#FEFECE" filter="url(#flukm90a9pxmg)" style="stroke:#A80036;stroke-width:2.0;"/><path d="M1763.5,1399.3301 C1758.5,1399.3301 1758.5,1412.5742 1758.5,1412.5742 C1758.5,1425.8184 1763.5,1425.8184 1763.5,1425.8184 " fill="none" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="332" x="1421.5" y="1417.8652">ID.JENIUS.RECURRING.ENRICHER.MUTUAL_FUNDS</text><rect fill="#FFFFFF" filter="url(#flukm90a9pxmg)" height="1315.3535" style="stroke:#A80036;stroke-width:1.0;" width="10" x="166" y="66.9766"/><rect fill="#FFFFFF" filter="url(#flukm90a9pxmg)" height="272.1055" style="stroke:#A80036;stroke-width:1.0;" width="10" x="381" y="93.2871"/><rect fill="#FFFFFF" filter="url(#flukm90a9pxmg)" height="182.8633" style="stroke:#A80036;stroke-width:1.0;" width="10" x="381" y="399.7031"/><rect fill="#FFFFFF" filter="url(#flukm90a9pxmg)" height="405.0371" style="stroke:#A80036;stroke-width:1.0;" width="10" x="381" y="616.877"/><rect fill="#FFFFFF" filter="url(#flukm90a9pxmg)" height="326.1055" style="stroke:#A80036;stroke-width:1.0;" width="10" x="381" y="1056.2246"/><polygon fill="#A80036" points="369,89.2871,379,93.2871,369,97.2871,373,93.2871" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="176" x2="375" y1="93.2871" y2="93.2871"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153" x="183" y="88.5449">mutation createPortfolio</text><path d="M39,71.9766 L39,96.9766 L157,96.9766 L157,81.9766 L147,71.9766 L39,71.9766 " fill="#FBFB77" filter="url(#flukm90a9pxmg)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M147,71.9766 L147,81.9766 L157,81.9766 L147,71.9766 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97" x="45" y="89.5449">create portfolio</text><polygon fill="#A80036" points="645,123.5977,655,127.5977,645,131.5977,649,127.5977" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="391" x2="651" y1="127.5977" y2="127.5977"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="398" y="122.8555">count portfolios</text><polygon fill="#A80036" points="778.5,168.2188,788.5,172.2188,778.5,176.2188,782.5,172.2188" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="391" x2="784.5" y1="172.2188" y2="172.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="76" x="398" y="152.166">GET /profile</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="80" x="398" y="167.4766">get isPriority</text><polygon fill="#A80036" points="909,212.8398,919,216.8398,909,220.8398,913,216.8398" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="391" x2="915" y1="216.8398" y2="216.8398"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118" x="398" y="196.7871">find account by cif</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="398" y="212.0977">get isSpecialAccount</text><path d="M138,231.8398 L205,231.8398 L205,238.8398 L195,248.8398 L138,248.8398 L138,231.8398 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="46.6211" style="stroke:#000000;stroke-width:2.0;" width="318.5" x="138" y="231.8398"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="22" x="153" y="245.4082">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="143" x="220" y="244.4746">[if portfolio exceed limit]</text><polygon fill="#A80036" points="187,266.4609,177,270.4609,187,274.4609,183,270.4609" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="181" x2="380" y1="270.4609" y2="270.4609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="193" y="265.7188">throw ForbiddenError</text><polygon fill="#A80036" points="645,302.7715,655,306.7715,645,310.7715,649,306.7715" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="391" x2="651" y1="306.7715" y2="306.7715"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="187" x="398" y="302.0293">insert {name,goalCode,image}</text><polygon fill="#A80036" points="1030,332.082,1040,336.082,1030,340.082,1034,336.082" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="391" x2="1036" y1="336.082" y2="336.082"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="191" x="398" y="331.3398">append new portfolio to cache</text><polygon fill="#A80036" points="187,361.3926,177,365.3926,187,369.3926,183,365.3926" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="181" x2="385" y1="365.3926" y2="365.3926"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147" x="193" y="360.6504">return created portfolio</text><polygon fill="#A80036" points="369,395.7031,379,399.7031,369,403.7031,373,399.7031" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="176" x2="375" y1="399.7031" y2="399.7031"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="186" x="183" y="394.9609">PATCH /portfolios/:goalCode</text><path d="M53,378.3926 L53,403.3926 L157,403.3926 L157,388.3926 L147,378.3926 L53,378.3926 " fill="#FBFB77" filter="url(#flukm90a9pxmg)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M147,378.3926 L147,388.3926 L157,388.3926 L147,378.3926 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83" x="59" y="395.9609">edit portfolio</text><polygon fill="#A80036" points="1030,430.0137,1040,434.0137,1030,438.0137,1034,434.0137" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="391" x2="1036" y1="434.0137" y2="434.0137"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140" x="398" y="429.2715">edit portfolio to cache</text><polygon fill="#A80036" points="645,459.3242,655,463.3242,645,467.3242,649,463.3242" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="391" x2="651" y1="463.3242" y2="463.3242"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="173" x="398" y="458.582">edit name/goalCode/image</text><path d="M138,478.3242 L205,478.3242 L205,485.3242 L195,495.3242 L138,495.3242 L138,478.3242 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="46.6211" style="stroke:#000000;stroke-width:2.0;" width="318.5" x="138" y="478.3242"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="22" x="153" y="491.8926">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="130" x="220" y="490.959">[if portfolio not found]</text><polygon fill="#A80036" points="187,512.9453,177,516.9453,187,520.9453,183,516.9453" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="181" x2="380" y1="516.9453" y2="516.9453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132" x="193" y="512.2031">throw NotFoundError</text><polygon fill="#A80036" points="1580.5,549.2559,1590.5,553.2559,1580.5,557.2559,1584.5,553.2559" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="391" x2="1586.5" y1="553.2559" y2="553.2559"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149" x="398" y="548.5137">publish edited portfolio</text><polygon fill="#A80036" points="187,578.5664,177,582.5664,187,586.5664,183,582.5664" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="181" x2="385" y1="582.5664" y2="582.5664"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140" x="193" y="577.8242">return edited portfolio</text><polygon fill="#A80036" points="369,612.877,379,616.877,369,620.877,373,616.877" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="176" x2="375" y1="616.877" y2="616.877"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97" x="183" y="612.1348">GET /portfolios</text><path d="M20,595.5664 L20,620.5664 L157,620.5664 L157,605.5664 L147,595.5664 L20,595.5664 " fill="#FBFB77" filter="url(#flukm90a9pxmg)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M147,595.5664 L147,605.5664 L157,605.5664 L147,595.5664 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="26" y="613.1348">show portfolio list</text><polygon fill="#A80036" points="909,647.1875,919,651.1875,909,655.1875,913,651.1875" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="391" x2="915" y1="651.1875" y2="651.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118" x="398" y="646.4453">find account by cif</text><path d="M138,666.1875 L205,666.1875 L205,673.1875 L195,683.1875 L138,683.1875 L138,666.1875 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="46.6211" style="stroke:#000000;stroke-width:2.0;" width="318.5" x="138" y="666.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="22" x="153" y="679.7559">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="109" x="220" y="678.8223">[if UNREGISTERED]</text><polygon fill="#A80036" points="187,700.8086,177,704.8086,187,708.8086,183,704.8086" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="181" x2="380" y1="704.8086" y2="704.8086"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="193" y="700.0664">return empty array</text><polygon fill="#A80036" points="1030,737.1191,1040,741.1191,1030,745.1191,1034,741.1191" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="391" x2="1036" y1="741.1191" y2="741.1191"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165" x="398" y="736.377">get portfolios cache by cif</text><path d="M138,756.1191 L205,756.1191 L205,763.1191 L195,773.1191 L138,773.1191 L138,756.1191 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="46.6211" style="stroke:#000000;stroke-width:2.0;" width="318.5" x="138" y="756.1191"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="22" x="153" y="769.6875">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="54" x="220" y="768.7539">[if found]</text><polygon fill="#A80036" points="187,790.7402,177,794.7402,187,798.7402,183,794.7402" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="181" x2="380" y1="794.7402" y2="794.7402"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="178" x="193" y="789.998">return portfolios from cache</text><polygon fill="#A80036" points="1205.5,827.0508,1215.5,831.0508,1205.5,835.0508,1209.5,831.0508" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="391" x2="1211.5" y1="831.0508" y2="831.0508"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="194" x="398" y="826.3086">GET /InquiryCustomerPortfolio</text><polygon fill="#A80036" points="645,856.3613,655,860.3613,645,864.3613,649,860.3613" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="391" x2="651" y1="860.3613" y2="860.3613"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101" x="398" y="855.6191">query portfolios</text><line style="stroke:#A80036;stroke-width:1.0;" x1="391" x2="433" y1="889.6719" y2="889.6719"/><line style="stroke:#A80036;stroke-width:1.0;" x1="433" x2="433" y1="889.6719" y2="902.6719"/><line style="stroke:#A80036;stroke-width:1.0;" x1="392" x2="433" y1="902.6719" y2="902.6719"/><polygon fill="#A80036" points="402,898.6719,392,902.6719,402,906.6719,398,902.6719" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="247" x="398" y="884.9297">map portfolios from WMS and database</text><path d="M315.5,917.6719 L382.5,917.6719 L382.5,924.6719 L372.5,934.6719 L315.5,934.6719 L315.5,917.6719 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="46.6211" style="stroke:#000000;stroke-width:2.0;" width="396" x="315.5" y="917.6719"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="22" x="330.5" y="931.2402">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="265" x="397.5" y="930.3066">[if goalCode ADH exists in WMS and not in DB]</text><polygon fill="#A80036" points="645,952.293,655,956.293,645,960.293,649,956.293" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="391" x2="651" y1="956.293" y2="956.293"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="398" y="951.5508">save ADH portfolio</text><polygon fill="#A80036" points="1030,988.6035,1040,992.6035,1030,996.6035,1034,992.6035" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="391" x2="1036" y1="992.6035" y2="992.6035"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="398" y="987.8613">save portfolios cache</text><polygon fill="#A80036" points="187,1017.9141,177,1021.9141,187,1025.9141,183,1021.9141" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="181" x2="385" y1="1021.9141" y2="1021.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="193" y="1017.1719">return portfolios</text><polygon fill="#A80036" points="369,1052.2246,379,1056.2246,369,1060.2246,373,1056.2246" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="176" x2="375" y1="1056.2246" y2="1056.2246"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="160" x="183" y="1051.4824">GET /portfolio/:goalCode</text><path d="M5,1034.9141 L5,1059.9141 L157,1059.9141 L157,1044.9141 L147,1034.9141 L5,1034.9141 " fill="#FBFB77" filter="url(#flukm90a9pxmg)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M147,1034.9141 L147,1044.9141 L157,1044.9141 L147,1034.9141 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="11" y="1052.4824">show portfolio detail</text><polygon fill="#A80036" points="1030,1086.5352,1040,1090.5352,1030,1094.5352,1034,1090.5352" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="391" x2="1036" y1="1090.5352" y2="1090.5352"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165" x="398" y="1085.793">get portfolios cache by cif</text><path d="M138,1105.5352 L205,1105.5352 L205,1112.5352 L195,1122.5352 L138,1122.5352 L138,1105.5352 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="46.6211" style="stroke:#000000;stroke-width:2.0;" width="318.5" x="138" y="1105.5352"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="22" x="153" y="1119.1035">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="54" x="220" y="1118.1699">[if found]</text><polygon fill="#A80036" points="187,1140.1563,177,1144.1563,187,1148.1563,183,1144.1563" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="181" x2="380" y1="1144.1563" y2="1144.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="178" x="193" y="1139.4141">return portfolios from cache</text><polygon fill="#A80036" points="1205.5,1176.4668,1215.5,1180.4668,1205.5,1184.4668,1209.5,1180.4668" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="391" x2="1211.5" y1="1180.4668" y2="1180.4668"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="194" x="398" y="1175.7246">GET /InquiryCustomerPortfolio</text><polygon fill="#A80036" points="645,1205.7773,655,1209.7773,645,1213.7773,649,1209.7773" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="391" x2="651" y1="1209.7773" y2="1209.7773"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101" x="398" y="1205.0352">query portfolios</text><line style="stroke:#A80036;stroke-width:1.0;" x1="391" x2="433" y1="1239.0879" y2="1239.0879"/><line style="stroke:#A80036;stroke-width:1.0;" x1="433" x2="433" y1="1239.0879" y2="1252.0879"/><line style="stroke:#A80036;stroke-width:1.0;" x1="392" x2="433" y1="1252.0879" y2="1252.0879"/><polygon fill="#A80036" points="402,1248.0879,392,1252.0879,402,1256.0879,398,1252.0879" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="247" x="398" y="1234.3457">map portfolios from WMS and database</text><polygon fill="#A80036" points="1030,1277.3984,1040,1281.3984,1030,1285.3984,1034,1281.3984" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="391" x2="1036" y1="1281.3984" y2="1281.3984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="398" y="1276.6563">save portfolios cache</text><polygon fill="#A80036" points="1353,1306.709,1363,1310.709,1353,1314.709,1357,1310.709" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="391" x2="1359" y1="1310.709" y2="1310.709"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="275" x="398" y="1305.9668">query all products and investmentManagers</text><line style="stroke:#A80036;stroke-width:1.0;" x1="391" x2="433" y1="1340.0195" y2="1340.0195"/><line style="stroke:#A80036;stroke-width:1.0;" x1="433" x2="433" y1="1340.0195" y2="1353.0195"/><line style="stroke:#A80036;stroke-width:1.0;" x1="392" x2="433" y1="1353.0195" y2="1353.0195"/><polygon fill="#A80036" points="402,1349.0195,392,1353.0195,402,1357.0195,398,1353.0195" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="216" x="398" y="1335.2773">map product detail with portfolios</text><polygon fill="#A80036" points="182,1378.3301,172,1382.3301,182,1386.3301,178,1382.3301" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="176" x2="385" y1="1382.3301" y2="1382.3301"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97" x="188" y="1377.5879">return portfolio</text><!--MD5=[2b461bec8e12fe3627653e75be017328]
@startuml portfolio
participant "App" as app
participant "ms-investment" as mi
collections "portfolios" as portfolios
participant "ms-user-preference" as mup
collections "accounts" as accounts
collections "redis-investment" as redis
participant "WMS\nInquiryCustomerPortfolio" as wms
collections "products" as products
queue "ID.JENIUS.RECURRING.ENRICHER.MUTUAL_FUNDS" as kafkaEnricher

activate app
app -> mi: mutation createPortfolio
note left: create portfolio
activate mi
mi -> portfolios: count portfolios
mi -> mup: GET /profile\nget isPriority
mi -> accounts: find account by cif\nget isSpecialAccount
opt if portfolio exceed limit
mi -> app: throw ForbiddenError
end
mi -> portfolios: insert {name,goalCode,image}
mi -> redis: append new portfolio to cache
mi -> app: return created portfolio
deactivate mi

app -> mi: PATCH /portfolios/:goalCode
note left: edit portfolio
activate mi
mi -> redis: edit portfolio to cache
mi -> portfolios: edit name/goalCode/image
opt if portfolio not found
mi -> app: throw NotFoundError
end
mi -> kafkaEnricher: publish edited portfolio
mi -> app: return edited portfolio
deactivate mi

app -> mi: GET /portfolios
note left: show portfolio list
activate mi
mi ->  accounts: find account by cif
opt if UNREGISTERED
mi -> app: return empty array
end
mi -> redis: get portfolios cache by cif
opt if found
mi -> app: return portfolios from cache
end
mi -> wms: GET /InquiryCustomerPortfolio
mi -> portfolios: query portfolios
mi -> mi: map portfolios from WMS and database
opt if goalCode ADH exists in WMS and not in DB
mi -> portfolios: save ADH portfolio
end
mi -> redis: save portfolios cache
mi -> app: return portfolios
deactivate mi

app -> mi: GET /portfolio/:goalCode
note left: show portfolio detail
activate mi
mi -> redis: get portfolios cache by cif
opt if found
mi -> app: return portfolios from cache
end
mi -> wms: GET /InquiryCustomerPortfolio
mi -> portfolios: query portfolios
mi -> mi: map portfolios from WMS and database
mi -> redis: save portfolios cache
mi -> products: query all products and investmentManagers
mi -> mi: map product detail with portfolios
mi -> app: return portfolio
deactivate mi
deactivate app

@enduml

PlantUML version 1.2022.0(Tue Jan 11 23:16:42 WIB 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>